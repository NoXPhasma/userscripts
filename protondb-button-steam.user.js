// ==UserScript==
// @name        Steam community ProtonDB button
// @namespace   protondbbutton
// @match       https://steamcommunity.com/app/*
// @grant       none
// @version     1.0.2
// @author      NoXPhasma
// @icon        https://store.steampowered.com/favicon.ico
// @description Adds a ProtonDB button to the Steam community sites for each game
// ==/UserScript==

const head = document.querySelector('head')
const apphub = document.querySelector('.apphub_OtherSiteInfo')
const style = '<style>.protondb_icon{width:16px;height:16px;display:inline-block;position:relative;left:-3px;top:2px;background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV8/pCKVDhYUcchQnayIijhqFYpQIdQKrTqYXPoFTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxc3NSdJES/5cUWsR4cNyPd/ced+8Af6PCVDM4DqiaZaSTCSGbWxVCrwiiHxGEMSYxU58TxRQ8x9c9fHy9i/Ms73N/jl4lbzLAJxDPMt2wiDeIpzctnfM+cZSVJIX4nHjUoAsSP3JddvmNc9FhP8+MGpn0PHGUWCh2sNzBrGSoxFPEMUXVKN+fdVnhvMVZrdRY6578heG8trLMdZpDSGIRSxAhQEYNZVRgIU6rRoqJNO0nPPyDjl8kl0yuMhg5FlCFCsnxg//B727NwuSEmxROAF0vtv0xDIR2gWbdtr+Pbbt5AgSegSut7a82gJlP0uttLXYERLaBi+u2Ju8BlzvAwJMuGZIjBWj6CwXg/Yy+KQf03QI9a25vrX2cPgAZ6ip1AxwcAiNFyl73eHd3Z2//nmn19wNmeHKifiwqIwAAAAZiS0dEAEsASwBLS6EoHgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+UEFw8PDtlvn4IAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAACfklEQVQ4y5WTS0hVURSG/7X3PvfqOT4CH4MGOpACG1TgbVTdgz3EqJFja1J57UUmBWXD9NKkHPQ8QUUQFBRJg6CMzKOTBg2kQdHEsKwofJR6Tt57zt6rgY8eKNSe/Zt/b9b61voJy5yMH2wG4C1Iz3UGl/LRMo/LBXhgI31qqFxRhJ6J4l5DIu25ztjfXrHUB5L1MQPKNqdXjzasXTkKoqwFblq2gkN9k82xTHQACBWhF2x2RYwTlo6GSEpbM+0tkKIx1CYBIfMAbGV09lJ9yW0BABHESQApz3VSwZcP52OIj0TC0Sp5LiJ1S7EeC2N9wxJiq+c6KQApFrJjsYVCJYXnOiEAJC1VyFH+PRl9iucg7s6T2mmAdVLnawDAc50QrH8xiIx5kumfaWnpn6m2SivukpQjV+tLNtTZuZEik5v16ou3SyGGwijesr/ve3WrP9MiiB4vMsj4gQ3mQcn6nhZqNgn9eRbqGYFHAMAA1QJoKjT5oh8isa9M8ZnxmB56rhMuTkESZbVQeyR4PAf5TdLvpOdEgZIQrK+PRzj+xxiFibs0c5nR8Q7F+oA0OnUlbY/V2bnaKp6qvebaYwAwMT1TakjeZ8BLwHQutnB4IBi6mHbWA0Db88nykMVpItoEIds5jt6QlHcKBIajfP7m5W1lLwDgiD/9+oJbvEYAQD6OVcYPbADQKgmSqgpCthOQIWU9KOGoW0PUFCUTwwvM9PwOqvkyzgJ4mfGD0DD3SjarYobdWMlH305xxbucVS2MqQyEaMv4QQMAm1hnl8sRDvZPdWX8oHlBt/pB88H+6c6lvGqpS02yG0YPPHr19amF2OqZ0B2aZPqf0/g/cf4JGMwTtztogMYAAAAASUVORK5CYII=")}.protondb_button:hover .protondb_icon{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABhGlDQ1BJQ0MgcHJvZmlsZQAAKJF9kT1Iw0AcxV8/pCKVDhYUcchQnayIijhqFYpQIdQKrTqYXPoFTRqSFBdHwbXg4Mdi1cHFWVcHV0EQ/ABxc3NSdJES/5cUWsR4cNyPd/ced+8Af6PCVDM4DqiaZaSTCSGbWxVCrwiiHxGEMSYxU58TxRQ8x9c9fHy9i/Ms73N/jl4lbzLAJxDPMt2wiDeIpzctnfM+cZSVJIX4nHjUoAsSP3JddvmNc9FhP8+MGpn0PHGUWCh2sNzBrGSoxFPEMUXVKN+fdVnhvMVZrdRY6578heG8trLMdZpDSGIRSxAhQEYNZVRgIU6rRoqJNO0nPPyDjl8kl0yuMhg5FlCFCsnxg//B727NwuSEmxROAF0vtv0xDIR2gWbdtr+Pbbt5AgSegSut7a82gJlP0uttLXYERLaBi+u2Ju8BlzvAwJMuGZIjBWj6CwXg/Yy+KQf03QI9a25vrX2cPgAZ6ip1AxwcAiNFyl73eHd3Z2//nmn19wNmeHKifiwqIwAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+UEFxACCeXfkCEAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAB/ElEQVQ4y5VTMWhUQRSc93f3g9cIemea4CFBMJWNgk0aQUHExvq0PNHGIDainTHYpU5hZyEotonaaWmKIHJ2hrMRzkgOAvf/v933xubfGSFC7sHCPhj2zZvZAf5TJJdI9uqzhFmKZFNVezs7O/ODwWBeVXskm0d+IKX0jGRn0ptZx8y6h2EzAKiqqlNT3SK5KiI3zOxXURRzMcYzanaOZDel9KXG9GKM0wGIMX4l2QCAfr/fJLlB8ibJlyQ/lmW5HGO8p6qtesWGmfWmDJxzmYiMAMB7f6yqqh+q+gjAOoBbIYTrAM7HGBcAQERGZvZ3BVV9Z2ZdM2u3Wq1X3vu+9/5iURT9sixL59yVLMu2Y4yXY4xtM+uKyCYA+HrqY5KfUkonQgivVfVnrfq3mnIbgIYQSu/9hpk9zbLsyZRBTWs1hHCb5G/n3PAwxb33UNUXIvLwHxdq206mlK6p6t2U0gUR2S2KYnE4HC6KyC4A7O/vH3fOvQGwbmYrOODz9uReVVUzxriWUvpMcmk8HjdV9YOqro9Go0sTnKr2DoroJzbmeQ7v/Wnn3AMAd0IIb8fj8ZqILOR5/n1io4hgKiKA5wC2SI4AvDezswAaMcb7ItLK87xN8pRzbpnkVQANM1s98lcm2UkprcwUphRjb29vb24wGMynlGYL0yxx/gPcGXF3x1uG/gAAAABJRU5ErkJggg==")}</style>'
const appid = /app\/([0-9]+)/gm.exec(window.location.pathname)[1]
const element = `<a class="btnv6_blue_hoverfade btn_medium protondb_button" href="https://www.protondb.com/app/${appid}" target="_blank"><span><i class="protondb_icon"></i>ProtonDB</span></a>`

head.insertAdjacentHTML('beforeend', style)
apphub.insertAdjacentHTML('beforeend', element)
